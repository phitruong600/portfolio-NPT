<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nguyễn Phi Trường | Photo Editor & Visual Storyteller</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --dark-bg:#0a0a0a; --light-bg:#ffffff; --primary-text:#e8e8e8; --secondary-text:#a0a0a0;
      --accent-gold:#f0c419; --accent-orange:#ff6b35; --card-bg:#1a1a1a; --border-color:#2a2a2a;
      --gradient-gold:linear-gradient(135deg,#f0c419 0%,#ffb347 100%);
      --gradient-dark:linear-gradient(135deg,#1a1a1a 0%,#2d2d2d 100%);
      --headerH: 90px; /* Chiều cao header KHI CUỘN */
    }
    *{margin:0;padding:0;box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{font-family:'Poppins',sans-serif;background:var(--dark-bg);color:var(--primary-text);line-height:1.7;font-weight:300;overflow-x:hidden}
    
    section[id]{ scroll-margin-top: var(--headerH); }

    /* Print */
    @media print{
      :root{--dark-bg:#fff!important;--card-bg:#f8f8f8!important;--primary-text:#000!important;--secondary-text:#555!important;--accent-gold:#000!important;--border-color:#ddd!important;--gradient-gold:#000!important}
      body{background:#fff!important;color:#000!important;font-size:11pt}
      .no-print{display:none!important}
      .hero{min-height:auto!important;padding:2cm 1cm!important}
      .section{padding:1.5cm 1cm!important}
      .floating-nav,.scroll-indicator,.floating-social,.brand-fixed-wrapper{display:none!important}
      .portfolio-grid{grid-template-columns:repeat(2,1fr)!important;gap:1rem!important;grid-auto-rows:auto!important}
      .gallery-item{grid-column:auto!important;grid-row:auto!important;height:auto!important;break-inside:avoid}
      .gallery-overlay{position:static!important;background:var(--card-bg)!important;transform:none!important;opacity:1!important;color:var(--primary-text)!important;padding:1rem!important}
      .hero-title .role,.section-title .highlight{-webkit-text-fill-color:var(--primary-text)!important}
    }

    /* Scrollbar */
    ::-webkit-scrollbar{width:8px}
    ::-webkit-scrollbar-track{background:var(--dark-bg)}
    ::-webkit-scrollbar-thumb{background:var(--accent-gold);border-radius:4px}
    ::-webkit-scrollbar-thumb:hover{background:#d4af37}
    
    /* Floating logo */
    .brand-fixed-wrapper {
      position: fixed; top: 0; left: 0; width: 100%; height: 150px; /* Ban đầu cao 120px */
      display: flex; justify-content: center; align-items: center;
      z-index: 1200; pointer-events: none; transition: all 0.4s ease;
    }
    .brand-fixed-wrapper.scrolled {
      height: var(--headerH); /* Khi cuộn, cao 90px */
      background-color: rgba(0, 0, 0, 0.5); 
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }
    .brand-fixed {
      height: 150px; /* Logo ban đầu cao 80px */
      filter: drop-shadow(0 2px 8px rgba(0,0,0,.4));
      transition: height 0.4s ease;
    }
    .brand-fixed-wrapper.scrolled .brand-fixed {
      height: 60px; /* Logo khi cuộn cao 60px */
    }
    
    /* NEW: Particle Canvas Background */
    #particle-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1; /* Đặt canvas phía sau mọi nội dung */
      opacity: 0.5; /* Giảm độ sáng của hiệu ứng */
    }

    .floating-nav{
      position: fixed;
      top: 50vh;
      right: max(12px, env(safe-area-inset-right) + 12px);
      transform: translateY(-50%);
      z-index: 1100;
      pointer-events: auto;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    .nav-dot{width:14px;height:14px;border-radius:50%;background:rgba(240,196,25,.2);cursor:pointer;transition:all .4s cubic-bezier(.25,.8,.25,1);position:relative;box-shadow:0 0 0 0 rgba(240,196,25,.4)}
    .nav-dot.active{animation:pulse 1.5s infinite}
    .nav-dot.active,.nav-dot:hover{background:var(--accent-gold);transform:scale(1.3);box-shadow:0 0 0 8px rgba(240,196,25,.1)}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(240,196,25,.4)}70%{box-shadow:0 0 0 10px rgba(240,196,25,0)}100%{box-shadow:0 0 0 0 rgba(240,196,25,0)}}
    .nav-dot::before{content:attr(data-section);position:absolute;right:130%;top:50%;transform:translateY(-50%);background:var(--card-bg);padding:.6rem 1.2rem;border-radius:8px;font-size:.85rem;white-space:nowrap;opacity:0;pointer-events:none;transition:all .4s cubic-bezier(.25,.8,.25,1);box-shadow:0 4px 12px rgba(0,0,0,.3)}
    .nav-dot:hover::before{opacity:1;right:140%}

    .page-container{max-width:1400px;margin:0 auto;position:relative}

    /* Hero */
    .hero{
      min-height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center; padding-top: 120px; padding-left:2rem; padding-right:2rem; padding-bottom:2rem;
      background: transparent; /* ĐÃ SỬA: Chuyển nền thành trong suốt */ position:relative; overflow:hidden;
    }
    .hero::before{content:'';position:absolute;inset:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="g" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(240,196,25,0.03)"/><circle cx="75" cy="75" r="1" fill="rgba(240,196,25,0.03)"/><circle cx="50" cy="10" r="0.5" fill="rgba(240,196,25,0.02)"/></pattern></defs><rect width="100%" height="100%" fill="url(%23g)"/></svg>');animation:grain 30s linear infinite;opacity:.5}
    @keyframes grain{0%{transform:translate(0,0);opacity:.5}50%{transform:translate(-5px,-5px);opacity:.3}100%{transform:translate(0,0);opacity:.5}}
    .hero-content{position:relative;z-index:2;max-width:900px;opacity:0;transform:translateY(50px);animation:heroFadeIn 1.5s ease-out forwards}
    @keyframes heroFadeIn{to{opacity:1;transform:translateY(0)}}
    .hero-title{font-size:clamp(2.2rem,7vw,4.5rem);font-weight:700;margin:0 0 0.5rem;line-height:1.3;opacity:0;animation:textReveal 1.2s ease-out .5s forwards}
    @keyframes textReveal{from{opacity:0;clip-path:inset(0 100% 0 0)}to{opacity:1;clip-path:inset(0 0 0 0)}}
    .hero-title .name{color:var(--light-bg);font-family:'Playfair Display',serif;display:block;margin-bottom:.5rem}
    .hero-title .role{background:var(--gradient-gold);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-family:'Poppins',sans-serif;font-weight:600;display:block}
    .hero-subtitle{font-size:clamp(1rem,3vw,1.3rem);max-width:700px;color:var(--secondary-text);margin:0.5rem auto;line-height:1.6;opacity:0;animation:textReveal 1.2s ease-out .8s forwards}
    
    .scroll-indicator{position:absolute;bottom:2rem;left:50%;transform:translateX(-50%);color:var(--secondary-text);font-size:.8rem;letter-spacing:1px;text-decoration:none;transition:color .3s ease;animation:fadeBounce 2s infinite}
    @keyframes fadeBounce{0%,20%,50%,80%,100%{opacity:1;transform:translate(-50%,0)}40%{opacity:.5;transform:translate(-50%,10px)}60%{opacity:.5;transform:translate(-50%,5px)}}
    .scroll-indicator:hover{color:var(--accent-gold)}
    .scroll-indicator::after{content:'↓';display:block;margin:.5rem auto 0}

    /* CTA Buttons */
    .hero-cta { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 1.75rem; margin-top: 1.5rem; opacity: 0; animation: textReveal 1.2s ease-out 1.1s forwards; }
    .cta-button { padding: 15px 30px; border-radius: 50px; font-weight: 600; font-size: .9rem; line-height: 1; text-decoration: none; position: relative; overflow: hidden; transition: transform .25s ease, filter .25s ease; isolation: isolate; will-change: transform, filter; }
    .cta-button::before { content: ''; position: absolute; top: 0; left: -120%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .18), transparent); transition: left .6s; z-index: -1; }
    .cta-button:hover::before { left: 120%; }
    .cta-button:hover { transform: translateY(-3px); }
    .cta-primary { background: var(--gradient-gold); color: var(--dark-bg); border: none; filter: drop-shadow(0 6px 14px rgba(240, 196, 25, .22)); }
    .cta-primary:hover { filter: drop-shadow(0 10px 22px rgba(240, 196, 25, .28)); }
    .cta-secondary { background: transparent; color: var(--primary-text); border: 2px solid var(--accent-gold); }
    .cta-button:focus-visible { outline: 2px solid var(--accent-gold); outline-offset: 3px; }
    
    /* Sections */
    .section{padding:8rem 2rem;border-bottom:1px solid var(--border-color);opacity:0;transform:translateY(50px);transition:all 1s cubic-bezier(.25,.8,.25,1)}
    .section.visible{opacity:1;transform:translateY(0)}
    .section-header{text-align:center;margin-bottom:5rem;opacity:0;transform:translateY(30px);transition:all .8s cubic-bezier(.25,.8,.25,1)}
    .section.visible .section-header{opacity:1;transform:translateY(0)}
    .section-title{font-family:'Playfair Display',serif;font-size:clamp(2.5rem,6vw,4rem);font-weight:700;margin-bottom:1rem}
    .section-title .highlight{background:var(--gradient-gold);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .section-subtitle{font-size:1.1rem;color:var(--secondary-text);max-width:600px;margin:0 auto}

    /* About */
    .about-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:4rem;align-items:stretch}
    .about-card{background:var(--gradient-dark);padding:3rem;border-radius:20px;border:1px solid var(--border-color);position:relative;overflow:hidden;transition:all .5s cubic-bezier(.25,.8,.25,1);opacity:0;transform:translateX(-50px);height:100%;display:flex;flex-direction:column}
    .about-card:nth-child(even){transform:translateX(50px)}
    .section.visible .about-card{opacity:1;transform:translateX(0);transition-delay:calc(.2s * var(--index,1))}
    .about-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--gradient-gold);transform:scaleX(0);transition:transform .4s ease}
    .about-card:hover::before{transform:scaleX(1)}
    .about-card:hover{border-color:var(--accent-gold);box-shadow:0 25px 60px rgba(0,0,0,.4)}
    .about-card h3{font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:700;color:var(--light-bg);margin-bottom:1.5rem}
    .about-card p{color:var(--secondary-text);margin-bottom:1.5rem;line-height:1.8}
    .skills-list{list-style:none}
    .skills-list li{padding:.7rem 0;color:var(--secondary-text);position:relative;padding-left:2rem;transition:color .3s ease,transform .3s ease, opacity .5s ease, transform .5s ease; opacity: 0; transform: translateX(-20px);}
    .section.visible .skills-list li { opacity: 1; transform: translateX(0); transition-delay: calc(0.15s * var(--skill-index)); }
    .skills-list li:hover{color:var(--primary-text);transform:translateX(5px)}
    .skills-list li::before{content:'✓';position:absolute;left:0;color:var(--accent-gold);font-weight:700}
    .skills-list li strong{color:var(--primary-text)}

    /* Process Section */
    .process-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 3rem; margin-top: 4rem; counter-reset: process-counter; }
    .process-step { background: var(--gradient-dark); padding: 2.5rem; border-radius: 20px; border: 1px solid var(--border-color); text-align: center; position: relative; transition: all .4s ease; opacity: 0; transform: translateY(40px); }
    .section.visible .process-step { opacity: 1; transform: translateY(0); transition-delay: calc(0.2s * var(--index)); }
    .process-step:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,.3); border-color: var(--accent-gold); }
    .process-step::before { counter-increment: process-counter; content: "0" counter(process-counter); font-family: 'Playfair Display', serif; font-size: 3rem; font-weight: 700; color: rgba(240, 196, 25, 0.15); position: absolute; top: 1.5rem; left: 2rem; line-height: 1; transition: color .4s ease; }
    .process-step:hover::before { color: rgba(240, 196, 25, 0.3); }
    .process-step h3 { font-size: 1.5rem; color: var(--light-bg); margin-bottom: 1rem; margin-top: 1rem; }
    .process-step p { color: var(--secondary-text); font-size: 0.95rem; }
    .process-step .icon { color: var(--accent-gold); width: 48px; height: 48px; margin-bottom: 1rem; stroke-width: 1.5; }

    /* Services */
    .services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2.5rem}
    .service-card{background:var(--gradient-dark);padding:3rem 2rem;border-radius:20px;text-align:center;border:1px solid var(--border-color);transition:all .5s cubic-bezier(.25,.8,.25,1);position:relative;overflow:hidden;opacity:0;transform:rotate(-5deg) scale(.9)}
    .section.visible .service-card{opacity:1;transform:rotate(0) scale(1);transition-delay:calc(.2s * var(--index,1))}
    .service-card::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:conic-gradient(from 0deg,transparent,var(--accent-gold),transparent);opacity:0;transition:all .6s ease;animation:rotate 6s linear infinite paused}
    @keyframes rotate{from{transform:rotate(0)}to{transform:rotate(360deg)}}
    .service-card:hover::before{opacity:.08;animation-play-state:running}
    .service-card:hover{transform:translateY(-12px) rotate(0) scale(1.05);box-shadow:0 25px 50px rgba(0,0,0,.4);border-color:var(--accent-gold)}
    .service-icon{width:70px;height:70px;margin:0 auto 1.5rem;display:flex;align-items:center;justify-content:center;border:2px solid var(--accent-gold);border-radius:50%;position:relative;transition:all .3s ease}
    .service-card:hover .service-icon{transform:scale(1.1) rotate(360deg);box-shadow:0 0 20px rgba(240,196,25,.3)}
    .service-icon svg{width:32px;height:32px;stroke:var(--accent-gold);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    .service-card h3{font-family:'Playfair Display',serif;font-size:1.5rem;color:var(--light-bg);margin-bottom:1rem}
    .service-card p{color:var(--secondary-text);line-height:1.6}

    /* Portfolio Grid */
    .portfolio{background:var(--card-bg)}
    .portfolio-filter{display:flex;justify-content:center;gap:1rem;margin-bottom:4rem;flex-wrap:wrap;opacity:0;transform:translateY(30px);transition:all .8s cubic-bezier(.25,.8,.25,1) .2s}
    .section.visible .portfolio-filter{opacity:1;transform:translateY(0)}
    .filter-btn{padding:12px 24px;background:transparent;border:2px solid var(--accent-gold);color:var(--accent-gold);border-radius:30px;cursor:pointer;transition:all .4s cubic-bezier(.25,.8,.25,1);font-weight:500;font-family:inherit;position:relative;overflow:hidden}
    .filter-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:var(--gradient-gold);transition:left .4s ease;z-index:-1}
    .filter-btn.active::before,.filter-btn:hover::before{left:0}
    .filter-btn.active,.filter-btn:hover{color:var(--dark-bg);transform:translateY(-2px);box-shadow:0 10px 25px rgba(240,196,25,.3)}
    
    .portfolio-grid{
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-auto-rows: 200px;
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    .gallery-item{position:relative;overflow:hidden;border-radius:15px;background:var(--dark-bg);transition:all .6s cubic-bezier(.25,.8,.25,1);cursor:pointer;opacity:0;transform:translateY(50px) scale(.95)}
    .gallery-item.animate{opacity:1;transform:translateY(0) scale(1)}
    .gallery-item img{
        width:100%;height:100%;object-fit:cover;
        object-position: center;
        transition:all .8s cubic-bezier(.25,.8,.25,1);
        content-visibility: auto;
        contain-intrinsic-size: 800px 600px;
    }
    .gallery-overlay{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(0deg,rgba(0,0,0,.95) 0%,rgba(0,0,0,.4) 50%,rgba(0,0,0,0) 100%);padding:2.5rem 2rem 2rem;color:#fff;transform:translateY(100%);transition:all .6s cubic-bezier(.25,.8,.25,1)}
    .gallery-item:hover .gallery-overlay{transform:translateY(0)}
    .gallery-item:hover img{transform:scale(1.1) rotate(2deg)}
    .gallery-item:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 30px 70px rgba(0,0,0,.5)}
    .gallery-overlay h4{font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:700;margin-bottom:.5rem}
    .gallery-overlay p{font-size:.85rem;color:rgba(255,255,255,.8);line-height:1.6}
    .gallery-overlay::after { content: '⊕'; position: absolute; top: 1rem; right: 1.5rem; font-size: 1.5rem; color: rgba(255,255,255,0.5); transition: all 0.4s ease; transform: rotate(0deg); }
    .gallery-item:hover .gallery-overlay::after { color: rgba(255,255,255,1); transform: rotate(90deg); }
    
    .item-1 { grid-column: 1 / 2; grid-row: 1 / 3; }
    .item-2 { grid-column: 2 / 4; grid-row: 1 / 2; }
    .item-3 { grid-column: 4 / 5; grid-row: 1 / 3; }
    .item-4 { grid-column: 2 / 4; grid-row: 2 / 3; }
    .item-5 { grid-column: 1 / 3; grid-row: 3 / 4; }
    .item-6 { grid-column: 3 / 4; grid-row: 3 / 5; }
    .item-7 { grid-column: 4 / 5; grid-row: 3 / 4; }
    .item-8 { grid-column: 1 / 2; grid-row: 4 / 5; }
    .item-9 { grid-column: 2 / 3; grid-row: 4 / 5; }
    .item-10 { grid-column: 4 / 5; grid-row: 4 / 6; }
    .item-11 { grid-column: 1 / 4; grid-row: 5 / 6; }

    /* Testimonials Section */
    .testimonials-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2.5rem; }
    .testimonial-card { background: transparent; padding: 2.5rem; border-radius: 20px; border: 1px solid var(--border-color); position: relative; opacity: 0; transform: scale(0.95); transition: all .5s ease; }
    .section.visible .testimonial-card { opacity: 1; transform: scale(1); transition-delay: calc(0.2s * var(--index)); }
    .testimonial-card:hover { border-color: var(--accent-gold); }
    .testimonial-card p { color: var(--secondary-text); font-size: 1.05rem; font-style: italic; line-height: 1.8; margin-bottom: 1.5rem; }
    .testimonial-card .author { font-weight: 600; color: var(--primary-text); }
    .testimonial-card .author span { display: block; font-weight: 400; color: var(--accent-gold); font-size: 0.9rem; }
    .testimonial-card::before { content: '“'; font-family: 'Playfair Display', serif; font-size: 6rem; color: rgba(240, 196, 25, 0.1); position: absolute; top: 1rem; left: 1.5rem; line-height: 1; z-index: -1; }

    /* Contact */
    .contact{background:var(--dark-bg);border:none}
    .contact-content{max-width:600px;margin:0 auto}
    .contact-links{display:flex;justify-content:center;gap:2rem;margin-top:3rem;flex-wrap:wrap}
    .contact-link{display:inline-flex;align-items:center;gap:.8rem;color:var(--accent-gold);text-decoration:none;font-weight:600;font-size:1.1rem;padding:1rem 2rem;border:2px solid var(--accent-gold);border-radius:50px;transition:all .4s cubic-bezier(.25,.8,.25,1);position:relative;overflow:hidden;opacity:0;transform:translateY(20px)}
    .section.visible .contact-link{opacity:1;transform:translateY(0);transition-delay:calc(.2s * var(--index,1))}
    .contact-link::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:var(--gradient-gold);transition:left .4s ease;z-index:-1}
    .contact-link:hover::before{left:0}
    .contact-link svg{width:20px;height:20px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;transition:transform .4s ease}
    .contact-link:hover svg{transform:rotate(20deg)}
    .contact-link:hover{color:var(--dark-bg);transform:translateY(-3px) scale(1.05);box-shadow:0 12px 35px rgba(240,196,25,.3)}

    /* Nút Zalo */
    .zalo-btn{
      position:fixed;bottom:2rem;left:2rem;
      background:var(--gradient-gold); 
      color:var(--dark-bg);
      border:none;padding:15px;border-radius:50%;cursor:pointer;
      width:60px;height:60px;display:flex;align-items:center;justify-content:center;
      box-shadow:0 8px 25px rgba(240, 196, 25, .3);
      transition:all .4s cubic-bezier(.25,.8,.25,1);z-index:1000
    }
    .zalo-btn svg{width:24px;height:24px;fill:currentColor;transition:transform .4s ease}
    .zalo-btn:hover svg{transform:scale(1.1)}
    .zalo-btn:hover{transform:scale(1.15);box-shadow:0 15px 40px rgba(240, 196, 25, .4)}
    
    /* Lightbox xem ảnh */
    .lightbox {
        position: fixed; inset: 0;
        display: none;
        align-items: center; justify-content: center;
        background: rgba(0,0,0,.92);
        z-index: 2000;
        touch-action: none;
    }
    .lightbox.open { display: flex; }
    .lightbox img {
        max-width: 95vw; max-height: 90vh;
        object-fit: contain;
        transform: translate(var(--tx, 0), var(--ty, 0)) scale(var(--sc, 1));
        transition: transform .2s ease;
        will-change: transform;
    }
    .lightbox .btn {
        position: fixed;
        width: 44px; height: 44px;
        border-radius: 50%;
        display: grid; place-items: center;
        color: #fff; background: rgba(0,0,0,.35);
        border: 1px solid rgba(255,255,255,.2);
        cursor: pointer;
    }
    .lightbox .close { top: 14px; right: 14px; font-size: 1.2rem; }
    .lightbox .prev { left: 12px; top: 50%; transform: translateY(-50%); font-size: 1.5rem; }
    .lightbox .next { right: 12px; top: 50%; transform: translateY(-50%); font-size: 1.5rem; }
    
    /* Responsive */
    @media (max-width: 900px) {
      .portfolio-grid { 
        grid-template-columns: repeat(2, 1fr); 
        grid-auto-rows: 250px; 
      }
      .gallery-item { 
        grid-column: auto !important; 
        grid-row: auto !important; 
      }
    }
    @media (max-width: 768px){
      :root{ --headerH: 70px; } 
      .brand-fixed-wrapper { height: 90px; }
      .brand-fixed { height: 60px; }
      .brand-fixed-wrapper.scrolled { height: var(--headerH); }
      .brand-fixed-wrapper.scrolled .brand-fixed { height: 50px; }
      .gallery-item { min-height: 280px; }
      .lightbox img { max-width: 98vw; max-height: 88vh; }
      .floating-nav{display:none}
      .about-grid{grid-template-columns:1fr;gap:2.5rem}
      .contact-links{flex-direction:column;gap:1rem}
      .section{padding:5rem 1rem}
      .zalo-btn{bottom:1rem;left:1rem}
      .services-grid{gap:2rem}
      .hero-cta{ flex-direction:column; align-items:center; gap:1.1rem; max-width:300px; margin:2rem auto 0}
    }
    @media (max-width: 480px){
      .portfolio-grid { 
        grid-template-columns: 1fr; 
        grid-auto-rows: 280px; 
      }
      .hero{padding-top:90px; padding-left:1rem; padding-right:1rem; padding-bottom: 1rem}
      .hero-title{font-size:2rem}
      .section-title{font-size:2rem}
      .about-card{padding:2rem}
      .service-card{padding:2rem 1.5rem}
      .contact-link{padding:.8rem 1.5rem;font-size:1rem}
    }

    /* Motion prefs */
    @media (prefers-reduced-motion:reduce){
      *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}
      .hero::before{animation:none}.scroll-indicator{animation:none}.nav-dot.active{animation:none}
    }
    .nav-dot:focus,.filter-btn:focus,.contact-link:focus,.zalo-btn:focus{outline:2px solid var(--accent-gold);outline-offset:2px}
  </style>
</head>
<body>
  <canvas id="particle-canvas" class="no-print"></canvas>
  <div class="brand-fixed-wrapper no-print">
    <img src="logo.png" alt="Nguyễn Phi Trường Logo" class="brand-fixed" />
  </div>

  <nav class="floating-nav no-print" aria-label="Điều hướng trang">
    <div class="nav-dot active" data-section="Trang chủ" data-scroll-to="hero" role="button" tabindex="0" aria-label="Đi đến trang chủ"></div>
    <div class="nav-dot" data-section="Giới thiệu" data-scroll-to="about" role="button" tabindex="0" aria-label="Đi đến giới thiệu"></div>
    <div class="nav-dot" data-section="Quy trình" data-scroll-to="process" role="button" tabindex="0" aria-label="Đi đến quy trình làm việc"></div>
    <div class="nav-dot" data-section="Dịch vụ" data-scroll-to="services" role="button" tabindex="0" aria-label="Đi đến dịch vụ"></div>
    <div class="nav-dot" data-section="Portfolio" data-scroll-to="portfolio" role="button" tabindex="0" aria-label="Đi đến portfolio"></div>
    <div class="nav-dot" data-section="Đánh giá" data-scroll-to="testimonials" role="button" tabindex="0" aria-label="Đi đến đánh giá của khách hàng"></div>
    <div class="nav-dot" data-section="Liên hệ" data-scroll-to="contact" role="button" tabindex="0" aria-label="Đi đến liên hệ"></div>
  </nav>

  <a href="https://zalo.me/0782800789" class="zalo-btn no-print" target="_blank" title="Liên hệ Zalo" aria-label="Liên hệ qua Zalo">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M410.6 28.59C394.5 10.7 371.1 0 346.7 0c-15.68 0-31.3 .7-46.1 2.3c-23.11 2.4-46.3 6.9-68.6 13.9c-20.25 6.4-39.75 13.9-57.5 22.8c-11.8 5.8-23.2 12-33.8 18.7c-9.6 6-18.3 12.4-26.2 19.1C72.8 94.39 52.2 112.5 35.8 133.2c-15.1 18.9-27.1 40-34.6 62.9C.8 202.7 0 206.1 0 209.5v101.3c0 10.9 2.5 21.6 7.3 31.4c6 12.7 14.5 24 25 33.8c7.8 7.2 16.2 13.6 24.9 19.7c5.2 3.7 10.3 7.3 15.4 10.9l-14.7 63.5c-1.3 5.5 .5 11.4 4.1 15.3c3.6 3.9 9 5.8 14.5 5.2l76.7-19.1l-.1 .1c9.2 2.9 18.7 5.4 28.4 7.2c11.5 2.2 23.2 3.7 35.1 4.5c14.7 .9 29.5 1.3 44.3 1.3c27.1 0 54-2.8 80-8.2c21.8-4.6 42.6-11.4 61.9-20.3c16.3-7.5 31.3-16.5 44.8-26.7c17-12.9 30.9-28.5 41.7-46.3c14.2-23.1 22.7-49.3 25.1-76.8c.6-7 1.2-14 1.7-21.1c.4-5.6 .8-11.2 1.1-16.9c.3-5.5 .6-11.1 .8-16.6c.2-5.4 .3-10.9 .3-16.4V209.5c0-26.4-6.4-52.2-19.2-75.1C479.2 87.29 448.2 49.69 410.6 28.59zM232.7 341.6V209.5c0-3.3 2.5-5.9 5.9-5.9H279c3.3 0 5.9 2.6 5.9 5.9V341.6c0 3.3-2.6 5.9-5.9 5.9H238.6c-3.4-.1-5.9-2.7-5.9-6zm-78.1-13.8c-3.3 0-5.9-2.6-5.9-5.9V189.1c0-3.3 2.6-5.9 5.9-5.9h37.4c3.3 0 5.9 2.6 5.9 5.9v132.6c0 3.3-2.6 5.9-5.9 5.9h-37.4zm189.6 0c-3.3 0-5.9-2.6-5.9-5.9V189.1c0-3.3 2.6-5.9 5.9-5.9h37.4c3.3 0 5.9 2.6 5.9 5.9v132.6c0 3.3-2.6 5.9-5.9 5.9h-37.4z"/></svg>
  </a>

  <div class="page-container">
    <section id="hero" class="hero">
      <div class="hero-content">
        <h1 class="hero-title">
          <span class="name">Nguyễn Phi Trường</span>
          <span class="role">Photo Editor & Visual Storyteller</span>
        </h1>
        <p class="hero-subtitle">
          Tôi không chỉ chỉnh sửa hình ảnh, tôi kiến tạo cảm xúc. 
          Bằng sự kết hợp giữa kỹ thuật chính xác và tầm nhìn nghệ thuật, 
          tôi biến những khoảnh khắc thành câu chuyện thị giác sống động và sâu sắc.
        </p>
        <div class="hero-cta">
          <a href="#portfolio" class="cta-button cta-primary">Xem Portfolio</a>
          <a href="#contact" class="cta-button cta-secondary">Liên hệ hợp tác</a>
        </div>
      </div>
      <a href="#about" class="scroll-indicator no-print" aria-label="Cuộn xuống để khám phá thêm">KHÁM PHÁ THÊM</a>
    </section>

    <section id="about" class="section">
      <div class="section-header">
        <h2 class="section-title">Triết lý & <span class="highlight">Năng lực</span></h2>
        <p class="section-subtitle">Nơi kỹ thuật chính xác và cảm quan nghệ thuật giao thoa để tạo nên những tác phẩm độc đáo.</p>
      </div>
      <div class="about-grid">
        <div class="about-card" style="--index:1;">
          <h3>Triết lý làm việc</h3>
          <p>Với tôi, mỗi bức ảnh là một thế giới riêng, chứa đựng một câu chuyện cần được kể. Tôi tin rằng quá trình hậu kỳ không phải là thay đổi thực tế, mà là khơi dậy và khuếch đại cảm xúc vốn có trong từng khoảnh khắc.</p>
          <p>Với tư duy cấu trúc và quy trình làm việc khoa học, tôi đảm bảo mọi dự án không chỉ sáng tạo mà còn được thực hiện một cách hiệu quả, nhất quán và đúng tiến độ.</p>
          <p><strong>Phong cách:</strong> Tự nhiên, Chân thực, Giàu cảm xúc</p>
        </div>
        <div class="about-card" style="--index:2;">
          <h3>Năng lực cốt lõi</h3>
          <ul class="skills-list">
            <li style="--skill-index: 1;"><strong>Phần mềm chuyên nghiệp:</strong> Adobe Lightroom, Photoshop, CapCut, Canva</li>
            <li style="--skill-index: 2;"><strong>Chuyên môn Nhiếp ảnh:</strong> Event, Portrait, Lifestyle, Natural Light</li>
            <li style="--skill-index: 3;"><strong>Kỹ thuật nâng cao:</strong> Color Correction & Grading, Portrait Retouching</li>
            <li style="--skill-index: 4;"><strong>Tư duy hình ảnh hiện đại:</strong>Sáng tạo nội dung (ảnh, video ngắn) tối ưu cho các nền tảng mạng xã hội.</li>
            <li style="--skill-index: 5;"><strong>Workflow:</strong> Quản lý dự án hiệu quả, tối ưu hoá quy trình hậu kỳ</li>
          </ul>
        </div>
      </div>
    </section>
    
    <!-- NEW SECTION: PROCESS -->
    <section id="process" class="section">
      <div class="section-header">
        <h2 class="section-title">Quy trình <span class="highlight">Làm việc</span></h2>
        <p class="section-subtitle">Minh bạch, hiệu quả và luôn đặt khách hàng làm trung tâm trong mọi giai đoạn của dự án.</p>
      </div>
      <div class="process-grid">
        <div class="process-step" style="--index: 1;">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
          <h3>Trao đổi & Lên ý tưởng</h3>
          <p>Lắng nghe sâu sắc yêu cầu, mong muốn và câu chuyện của bạn để định hình ý tưởng và phong cách hình ảnh phù hợp nhất.</p>
        </div>
        <div class="process-step" style="--index: 2;">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
          <h3>Thực thi & Sáng tạo</h3>
          <p>Tiến hành chụp ảnh hoặc tiếp nhận file gốc. Áp dụng kỹ thuật và sự sáng tạo để nắm bắt hoặc bắt đầu quá trình xử lý hình ảnh.</p>
        </div>
        <div class="process-step" style="--index: 3;">
           <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
          <h3>Hậu kỳ & Bàn giao</h3>
          <p>Tinh chỉnh màu sắc, ánh sáng và chi tiết. Gửi sản phẩm demo, tiếp nhận phản hồi và hoàn thiện trước khi bàn giao thành phẩm cuối cùng.</p>
        </div>
      </div>
    </section>

    <section id="services" class="section">
      <div class="section-header">
        <h2 class="section-title">Dịch vụ <span class="highlight">Chuyên nghiệp</span></h2>
        <p class="section-subtitle">Cung cấp các giải pháp hình ảnh toàn diện, được "đo ni đóng giày" cho từng nhu cầu cụ thể của bạn.</p>
      </div>
      <div class="services-grid">
        <div class="service-card" style="--index:1;">
          <div class="service-icon"><svg viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg></div>
          <h3>Nhiếp ảnh Sự kiện</h3>
          <p>Ghi lại những khoảnh khắc sống động, truyền tải trọn vẹn tinh thần và cảm xúc của sự kiện một cách tự nhiên và tinh tế nhất.</p>
        </div>
        <div class="service-card" style="--index:2;">
          <div class="service-icon"><svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/><circle cx="12" cy="12" r="3"/></svg></div>
          <h3>Chỉnh sửa & Hậu kỳ ảnh</h3>
          <p>Nâng tầm hình ảnh của bạn với dịch vụ chỉnh sửa chuyên sâu: cân chỉnh màu sắc, retouch da, tạo mood & tone nhất quán.</p>
        </div>
        <div class="service-card"style="--index:3;">
          <div class="service-icon"><svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
          <h3>Nhiếp ảnh Chân dung</h3>
          <p>Tạo ra những bộ ảnh chân dung thể hiện được cá tính và câu chuyện riêng của bạn, tập trung vào vẻ đẹp tự nhiên và cảm xúc chân thật.</p>
        </div>
        <div class="service-card" style="--index:4;">
          <div class="service-icon"><svg viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/><path d="m7 13 3-3 3 3 4-4"/></svg></div>
          <h3>Hình ảnh Thương hiệu</h3>
          <p>Xây dựng và tối ưu hóa hình ảnh cho cá nhân hoặc doanh nghiệp trên mạng xã hội, đảm bảo sự chuyên nghiệp, sắc nét và thu hút.</p>
        </div>
      </div>
    </section>

    <section id="portfolio" class="section portfolio">
      <div class="section-header">
        <h2 class="section-title">Dự án <span class="highlight">Tiêu biểu</span></h2>
        <p class="section-subtitle">Khám phá những tác phẩm đại diện cho phong cách và kỹ thuật của tôi</p>
      </div>

      <div class="portfolio-filter no-print" role="tablist" aria-label="Bộ lọc portfolio">
        <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true">Tất cả</button>
        <button class="filter-btn" data-filter="portrait" role="tab" aria-selected="false">Chân dung</button>
        <button class="filter-btn" data-filter="event" role="tab" aria-selected="false">Sự kiện</button>
        <button class="filter-btn" data-filter="landscape" role="tab" aria-selected="false">Phong cảnh</button>
        <button class="filter-btn" data-filter="lifestyle" role="tab" aria-selected="false">Đời sống</button>
      </div>
      
      <div class="portfolio-grid" role="tabpanel">
        <div class="gallery-item item-1" data-category="portrait">
          <img loading="lazy" src="chandung3.webp" alt="Chân dung dưới ánh đèn">
          <div class="gallery-overlay"><h4>Chân dung dưới ánh đèn</h4><p>Ánh sáng vàng ấm tạo chiều sâu</p></div>
        </div>

        <div class="gallery-item item-2" data-category="event">
          <img loading="lazy" src="Tocxanhvatao.webp" alt="Lễ phục cung đình">
          <div class="gallery-overlay"><h4>Lễ phục cung đình</h4><p>Uy nghi của đoàn lễ hội</p></div>
        </div>

        <div class="gallery-item item-3" data-category="portrait">
          <img loading="lazy" src="chandung2.webp" alt="Nàng thơ bên bàn bida">
          <div class="gallery-overlay"><h4>Nàng thơ bên bàn bida</h4><p>Trong trẻo và cá tính</p></div>
        </div>

        <div class="gallery-item item-4" data-category="landscape">
          <img loading="lazy" src="HCMCnight3.webp" alt="Phố bên sông">
          <div class="gallery-overlay"><h4>Phố bên sông</h4><p>Thành phố lung linh, rực sáng bên mặt nước</p></div>
        </div>

        <div class="gallery-item item-5" data-category="event">
          <img loading="lazy" src="Tocxanhvatao2.webp" alt="Uyên ương lễ phục">
          <div class="gallery-overlay"><h4>Uyên ương lễ phục</h4><p>Cặp đôi nắm tay giữa lễ hội</p></div>
        </div>

        <div class="gallery-item item-6" data-category="portrait">
          <img loading="lazy" src="chandung.webp" alt="An yên bên trang sách">
          <div class="gallery-overlay"><h4>Sang trọng</h4><p>Ánh nhìn cuốn hút trong không gian cổ điển</p></div>
        </div>

        <div class="gallery-item item-7" data-category="event">
          <img loading="lazy" src="Tocxanhvatao5.webp" alt="Vũ điệu dân gian">
          <div class="gallery-overlay"><h4>Vũ điệu dân gian</h4><p>Nét duyên dáng trong điệu múa</p></div>
        </div>

        <div class="gallery-item item-8" data-category="portrait">
          <img loading="lazy" src="Hoanghon.webp" alt="Hoàng hôn Bitexco">
          <div class="gallery-overlay"><h4>Hoàng hôn Bitexco</h4><p>Tòa tháp ẩn hiện sau tán cây trong nắng chiều cam</p></div>
        </div>

        <div class="gallery-item item-9" data-category="landscape">
          <img loading="lazy" src="KhoangKhong.webp" alt="Hành lang tĩnh lặng">
          <div class="gallery-overlay"><h4>Hành lang tĩnh lặng</h4><p>Đối xứng kiến trúc sâu hút</p></div>
        </div>

        <div class="gallery-item item-10" data-category="lifestyle">
          <img loading="lazy" src="HoanhonQue.webp" alt="Khúc đồng quê">
          <div class="gallery-overlay"><h4>Khúc đồng quê</h4><p>Mộc mạc, yên bình cuối ngày</p></div>
        </div>

        <div class="gallery-item item-11" data-category="event">
          <img loading="lazy" src="Tocxanhvatao4.webp" alt="Vinh quy bái tổ">
          <div class="gallery-overlay"><h4>Vinh quy bái tổ</h4><p>Không khí trang trọng của đoàn rước lễ</p></div>
        </div>
      </div>

      </div>
    </section>

    <!-- NEW SECTION: TESTIMONIALS -->
    <section id="testimonials" class="section">
      <div class="section-header">
        <h2 class="section-title">Khách hàng <span class="highlight">Nói về tôi</span></h2>
        <p class="section-subtitle">Sự hài lòng của khách hàng là thước đo thành công và là động lực lớn nhất cho sự sáng tạo.</p>
      </div>
      <div class="testimonials-grid">
        <div class="testimonial-card" style="--index: 1;">
          <p>"Cách Trường xử lý màu sắc thật sự rất tuyệt vời. Bộ ảnh sự kiện của công ty chúng tôi trông chuyên nghiệp và sống động hơn hẳn. Rất hài lòng với sự nhiệt tình và tốc độ làm việc."</p>
          <div class="author">Anh Minh Quân <span>Marketing Manager, ABC Corp</span></div>
        </div>
        <div class="testimonial-card" style="--index: 2;">
          <p>"Mình đã rất ngại ngùng trước ống kính, nhưng Trường đã tạo ra một không khí rất thoải mái. Kết quả là mình đã có một bộ ảnh chân dung vô cùng tự nhiên và đúng với con người mình."</p>
          <div class="author">Chị Lan Anh <span>Content Creator</span></div>
        </div>
      </div>
    </section>
    
    <section id="contact" class="section contact">
      <div class="section-header">
        <h2 class="section-title">Hãy cùng <span class="highlight">Sáng tạo</span></h2>
        <p class="section-subtitle">Nếu bạn đang tìm kiếm một người đồng hành để kể câu chuyện của mình qua hình ảnh, đừng ngần ngại kết nối.
          Hãy cùng nhau kiến tạo những tác phẩm ấn tượng!</p>
      </div>
      <div class="contact-content">
        <div class="contact-links">
          <a href="mailto:nguyenphitruong1807@gmail.com" class="contact-link" style="--index:1;" aria-label="Gửi email">
            <svg viewBox="0 0 24 24"><path d="m4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            <span>nguyenphitruong1807@gmail.com</span>
          </a>
          <a href="tel:+84782800789" class="contact-link" style="--index:2;" aria-label="Gọi điện thoại">
            <svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
            <span>Gọi điện thoại</span>
          </a>
        </div>

        <div style="margin-top:4rem;padding-top:2rem;border-top:1px solid var(--border-color);">
          <div style="color:var(--secondary-text);font-size:.9rem;display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;text-align:left;">
            <span style="display:flex;align-items:center;gap:.5rem;">
              <svg style="width:16px;height:16px;stroke:var(--accent-gold);fill:none;stroke-width:2;" viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
              <strong>Khu vực:</strong> TP. Hồ Chí Minh và lân cận
            </span>
            <span style="display:flex;align-items:center;gap:.5rem;">
              <svg style="width:16px;height:16px;stroke:var(--accent-gold);fill:none;stroke-width:2;" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg>
              <strong>Thời gian:</strong> Linh hoạt
            </span>
            <span style="display:flex;align-items:center;gap:.5rem;">
              <svg style="width:16px;height:16px;stroke:var(--accent-gold);fill:none;stroke-width:2;" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <strong>Chuyên môn:</strong> Event • Portrait • Editing
            </span>
          </div>
        </div>
      </div>
    </section>

    <footer style="background:#000;padding:2rem;text-align:center;border-top:1px solid var(--border-color);">
      <p style="color:var(--secondary-text);font-size:.9rem;margin-bottom:1rem;">© 2025 Nguyễn Phi Trường - Photo Editor & Visual Storyteller</p>
      <p style="color:var(--accent-gold);font-size:.8rem;">"Mỗi bức ảnh là một câu chuyện, mỗi câu chuyện là một kỷ niệm"</p>
    </footer>
  </div>

  <div id="lightbox" class="lightbox no-print" aria-hidden="true">
    <button class="btn close" aria-label="Đóng">✕</button>
    <button class="btn prev"  aria-label="Ảnh trước">‹</button>
    <img alt="Xem ảnh lớn">
    <button class="btn next"  aria-label="Ảnh sau">›</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const navDots = document.querySelectorAll('.nav-dot');
      
      function scrollToSection(sectionId){
        const el = document.getElementById(sectionId);
        if(!el) return;
        const offset = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--headerH')) || 80;
        const y = el.getBoundingClientRect().top + window.scrollY - offset;
        window.scrollTo({ top: y, behavior: 'smooth' });
      }
      
      navDots.forEach(dot => {
        dot.addEventListener('click', (e) => {
          e.preventDefault();
          const sectionId = dot.getAttribute('data-scroll-to');
          if (sectionId) {
            scrollToSection(sectionId);
          }
        });
      });

      const sections = document.querySelectorAll('section[id]');
      const sectionObserver = new IntersectionObserver((entries)=>{
        const bestEntry = entries.reduce((best, current) => {
          return (best && best.intersectionRatio > current.intersectionRatio) ? best : current;
        }, null);

        if (bestEntry && bestEntry.isIntersecting) {
            const id = bestEntry.target.id;
            navDots.forEach(dot => {
                dot.classList.toggle('active', dot.getAttribute('data-scroll-to') === id);
            });
        }
        
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });

      }, {
        root: null,
        rootMargin: '-45% 0px -45% 0px',
        threshold: [0, 0.2, 0.4, 0.6, 0.8, 1.0]
      });
      sections.forEach(s=>sectionObserver.observe(s));


      // Filter
      const filterBtns = document.querySelectorAll('.filter-btn');
      const portfolioItems = document.querySelectorAll('.gallery-item');
      filterBtns.forEach(btn=>{
        btn.addEventListener('click',()=>{
          filterBtns.forEach(b=>{b.classList.remove('active');b.setAttribute('aria-selected','false');});
          btn.classList.add('active'); btn.setAttribute('aria-selected','true');
          const filter = btn.getAttribute('data-filter');
          portfolioItems.forEach((item)=>{
            const cat = item.getAttribute('data-category');
            const show = filter === 'all' || cat === filter;
            if(show){
              item.style.display='block';
              setTimeout(()=>{
                item.style.opacity='1';
                item.style.transform='translateY(0) scale(1)';
              }, 20); 
            }else{
              item.style.opacity='0';
              item.style.transform='translateY(20px) scale(.95)';
              setTimeout(()=>{ item.style.display='none'; },300);
            }
          });
        });
      });

      // Gallery appear
      const galleryItems = document.querySelectorAll('.gallery-item');
      const galleryObserver = new IntersectionObserver((entries, observer)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            entry.target.classList.add('animate');
            observer.unobserve(entry.target);
          }
        });
      },{threshold:0.1,rootMargin:'0px 0px -50px 0px'});
      galleryItems.forEach(i=>galleryObserver.observe(i));

      // Keyboard nav for accessibility
      navDots.forEach((dot,i)=>{
        dot.addEventListener('keydown',(e)=>{
          if(e.key==='Enter'||e.key===' '){ e.preventDefault(); dot.click(); }
          if(e.key==='ArrowDown'){ e.preventDefault(); navDots[Math.min(i+1,navDots.length-1)].focus(); }
          if(e.key==='ArrowUp'){ e.preventDefault(); navDots[Math.max(i-1,0)].focus(); }
        });
      });

      // Parallax and Logo Shrink Effect
      let ticking = false;
      const heroContent = document.querySelector('.hero-content');
      const brandFixedWrapper = document.querySelector('.brand-fixed-wrapper'); 
      const scrollThreshold = 50;

      function handleScroll() {
        const scrolled = window.pageYOffset;
        if(heroContent){
          heroContent.style.transform=`translateY(${scrolled*0.3}px)`;
          heroContent.style.opacity=Math.max(0, 1 - scrolled/(window.innerHeight*0.8));
        }
        if (brandFixedWrapper) {
          if (scrolled > scrollThreshold) {
            brandFixedWrapper.classList.add('scrolled');
          } else {
            brandFixedWrapper.classList.remove('scrolled');
          }
        }
        ticking = false;
      }
      function requestScrollUpdate() {
        if(!ticking){
          ticking = true;
          requestAnimationFrame(handleScroll);
        }
      }
      window.addEventListener('scroll', requestScrollUpdate, {passive:true});

      handleScroll();

      // JAVASCRIPT CHO LIGHTBOX
      const thumbs = [...document.querySelectorAll('.portfolio-grid .gallery-item')];
      const lb = document.getElementById('lightbox');
      const lbImg = lb.querySelector('img');
      const btnPrev = lb.querySelector('.prev');
      const btnNext = lb.querySelector('.next');
      const btnClose = lb.querySelector('.close');
      let cur = 0, tx=0, ty=0, sc=1;

      function openLB(clickedItem){
        cur = thumbs.indexOf(clickedItem);
        if (cur === -1) return;
        
        tx=0; ty=0; sc=1; applyTf();
        const thumbImg = thumbs[cur].querySelector('img');
        lbImg.src = thumbImg.src;
        lbImg.alt = thumbImg.alt;
        lb.classList.add('open');
        lb.setAttribute('aria-hidden','false');
      }
      
      function closeLB(){ 
        lb.classList.remove('open');
        lb.setAttribute('aria-hidden','true');
      }
      
      function next(){ openLB(thumbs[(cur + 1) % thumbs.length]); }
      function prev(){ openLB(thumbs[(cur - 1 + thumbs.length) % thumbs.length]); }
      
      function applyTf(){
        lbImg.style.setProperty('--tx', tx + 'px');
        lbImg.style.setProperty('--ty', ty + 'px');
        lbImg.style.setProperty('--sc', sc);
      }

      thumbs.forEach(item => item.addEventListener('click', () => openLB(item)));
      btnClose.addEventListener('click', closeLB);
      btnNext.addEventListener('click', next);
      btnPrev.addEventListener('click', prev);
      lb.addEventListener('click', e => { if(e.target === lb) closeLB(); });
      
      document.addEventListener('keydown', e => {
        if(!lb.classList.contains('open')) return;
        if(e.key === 'Escape') closeLB();
        if(e.key === 'ArrowRight') next();
        if(e.key === 'ArrowLeft') prev();
      });

      // Zoom/pan cho mobile
      let startX=0, startY=0, startTx=0, startTy=0, startDist=0, startSc=1, lastTap=0;
      const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
      const dist=t=>Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY);

      lb.addEventListener('touchstart',e=>{
        if(e.touches.length===1){ startX=e.touches[0].clientX; startY=e.touches[0].clientY; startTx=tx; startTy=ty; }
        if(e.touches.length===2){ startDist=dist(e.touches); startSc=sc; }
      },{passive:true});

      lb.addEventListener('touchmove',e=>{
        if(e.touches.length===2){ e.preventDefault(); sc = clamp(startSc * dist(e.touches)/startDist, 1, 4); applyTf(); return; }
        if(e.touches.length===1 && sc>1){ e.preventDefault();
          tx = startTx + (e.touches[0].clientX - startX);
          ty = startTy + (e.touches[0].clientY - startY);
          applyTf();
        }
      },{passive:false});

      lb.addEventListener('touchend',e=>{
        const t=Date.now();
        if(t-lastTap<300){ sc = sc>1.1 ? 1 : 2; tx=0; ty=0; applyTf(); }
        lastTap=t;
      });
      
      // --- NEW: Particle Animation ---
      const canvas = document.getElementById('particle-canvas');
      if (canvas) {
          const ctx = canvas.getContext('2d');
          let particles = [];

          function setCanvasSize() {
              canvas.width = window.innerWidth;
              canvas.height = window.innerHeight;
          }

          class Particle {
              constructor() {
                  this.x = Math.random() * canvas.width;
                  this.y = Math.random() * canvas.height;
                  this.size = Math.random() * 2 + 0.5;
                  this.speedX = (Math.random() * 1 - 0.5) * 0.5;
                  this.speedY = (Math.random() * 1 - 0.5) * 0.5;
                  this.color = `rgba(240, 196, 25, ${Math.random() * 0.6 + 0.2})`;
              }
              update() {
                  if (this.x > canvas.width || this.x < 0) this.speedX *= -1;
                  if (this.y > canvas.height || this.y < 0) this.speedY *= -1;
                  this.x += this.speedX;
                  this.y += this.speedY;
              }
              draw() {
                  ctx.fillStyle = this.color;
                  ctx.beginPath();
                  ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                  ctx.fill();
              }
          }

          function initParticles() {
              particles = [];
              const numberOfParticles = window.innerWidth > 768 ? 80 : 30;
              for (let i = 0; i < numberOfParticles; i++) {
                  particles.push(new Particle());
              }
          }

          function connectParticles() {
              let opacityValue = 1;
              for (let a = 0; a < particles.length; a++) {
                  for (let b = a; b < particles.length; b++) {
                      let distance = Math.hypot(particles[a].x - particles[b].x, particles[a].y - particles[b].y);
                      if (distance < 120) {
                          opacityValue = 1 - (distance / 120);
                          ctx.strokeStyle = `rgba(240, 196, 25, ${opacityValue * 0.3})`;
                          ctx.lineWidth = 1;
                          ctx.beginPath();
                          ctx.moveTo(particles[a].x, particles[a].y);
                          ctx.lineTo(particles[b].x, particles[b].y);
                          ctx.stroke();
                      }
                  }
              }
          }
          
          function animateParticles() {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              for (const particle of particles) {
                  particle.update();
                  particle.draw();
              }
              connectParticles();
              requestAnimationFrame(animateParticles);
          }
          
          let resizeTimeout;
          window.addEventListener('resize', () => {
              clearTimeout(resizeTimeout);
              resizeTimeout = setTimeout(() => {
                setCanvasSize();
                initParticles();
              }, 100);
          });

          setCanvasSize();
          initParticles();
          animateParticles();
      }
    });
  </script>
</body>
</html>






